import React, { useState } from 'react';
import { 
  BookOpen, 
  Monitor, 
  Palette, 
  MessageSquare, 
  Clock, 
  CheckCircle, 
  Sparkles, 
  LayoutTemplate, 
  Instagram, 
  Share2, 
  Zap, 
  Download,
  ChevronDown,
  ChevronUp,
  Wand2,
  FileText,
  Settings,
  Image as ImageIcon,
  HelpCircle,
  MousePointerClick
} from 'lucide-react';

const Section = ({ title, time, icon: Icon, children, color = "blue" }) => {
  const [isOpen, setIsOpen] = useState(true);
  
  const colorClasses = {
    blue: "bg-blue-50 border-blue-200 text-blue-900",
    purple: "bg-purple-50 border-purple-200 text-purple-900",
    green: "bg-green-50 border-green-200 text-green-900",
    orange: "bg-orange-50 border-orange-200 text-orange-900",
    indigo: "bg-indigo-50 border-indigo-200 text-indigo-900",
    red: "bg-red-50 border-red-200 text-red-900",
  };

  const headerColors = {
    blue: "bg-blue-600",
    purple: "bg-purple-600",
    green: "bg-green-600",
    orange: "bg-orange-600",
    indigo: "bg-indigo-600",
    red: "bg-red-600",
  };

  return (
    <div className={`mb-8 rounded-xl border-2 overflow-hidden shadow-lg transition-all duration-300 ${colorClasses[color].replace('bg-', 'border-opacity-50 ')}`}>
      <div 
        className={`${headerColors[color]} p-4 text-white flex justify-between items-center cursor-pointer hover:opacity-90 transition-opacity`}
        onClick={() => setIsOpen(!isOpen)}
      >
        <div className="flex items-center gap-3">
          <div className="p-2 bg-white bg-opacity-20 rounded-full">
            <Icon size={24} />
          </div>
          <div>
            <h2 className="text-xl font-bold">{title}</h2>
            {time && <span className="text-sm opacity-90 flex items-center gap-1"><Clock size={14} /> {time}</span>}
          </div>
        </div>
        {isOpen ? <ChevronUp /> : <ChevronDown />}
      </div>
      
      {isOpen && (
        <div className={`p-6 ${colorClasses[color]}`}>
          {children}
        </div>
      )}
    </div>
  );
};

const SubPart = ({ number, title, children, icon: Icon }) => (
  <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 mb-4 last:mb-0">
    <h3 className="font-bold text-gray-800 mb-3 text-lg border-b pb-2 flex items-center gap-2">
      <span className="bg-gray-800 text-white text-xs px-2 py-1 rounded">{number}</span>
      {title}
    </h3>
    <div className="text-gray-700 text-sm space-y-2">
      {children}
    </div>
  </div>
);

const StepList = ({ steps }) => (
  <ol className="list-decimal list-inside space-y-1 ml-1 text-gray-600">
    {steps.map((step, idx) => (
      <li key={idx}><span dangerouslySetInnerHTML={{__html: step}} /></li>
    ))}
  </ol>
);

const PromptFormula = () => (
  <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-xl text-white shadow-xl my-6">
    <h3 className="text-center font-bold text-xl mb-4 flex items-center justify-center gap-2">
      <Sparkles className="text-yellow-300" /> 프롬프트 황금 공식
    </h3>
    <div className="flex flex-wrap justify-center gap-2 text-sm md:text-base font-bold">
      {['스타일', '주요 대상', '행동', '배경', '분위기', '색상'].map((item, idx) => (
        <div key={idx} className="flex items-center">
          <span className="bg-white text-indigo-700 px-3 py-1 rounded-full shadow-md">{item}</span>
          {idx !== 5 && <span className="mx-1 text-white opacity-70">+</span>}
        </div>
      ))}
    </div>
    <div className="mt-4 bg-white bg-opacity-10 p-4 rounded-lg text-sm">
      <p className="opacity-80 mb-1 text-xs uppercase tracking-wider">Bad Example</p>
      <p className="mb-3 text-red-200">❌ "도서관 포스터 그려줘"</p>
      <p className="opacity-80 mb-1 text-xs uppercase tracking-wider">Good Example</p>
      <p className="text-green-200">⭕ "밝은 수채화 스타일로 + 초등학생 3명이 도서관에서 즐겁게 책을 읽는 모습 + 큰 창문으로 여름 햇살이 들어오는 아늑한 공간 + 파스텔톤 색상"</p>
    </div>
  </div>
);

const ChecklistItem = ({ text, checked = true }) => (
  <div className="flex items-start gap-2 mb-2">
    {checked ? <CheckCircle className="text-green-500 mt-1 flex-shrink-0" size={16} /> : <div className="w-4 h-4 border-2 border-gray-300 rounded-full mt-1 flex-shrink-0" />}
    <span className="text-gray-700">{text}</span>
  </div>
);

export default function App() {
  return (
    <div className="min-h-screen bg-gray-100 font-sans text-gray-800 pb-20">
      {/* Header */}
      <header className="bg-gradient-to-r from-blue-800 to-indigo-800 text-white p-10 text-center shadow-xl sticky top-0 z-10">
        <div className="max-w-5xl mx-auto">
          <div className="inline-block bg-blue-600 px-3 py-1 rounded-full text-xs font-bold mb-2 uppercase tracking-wide">
            지역 커뮤니티 맞춤형
          </div>
          <h1 className="text-2xl md:text-4xl font-extrabold mb-2">
            🎨 AI로 만드는 우리 도서관 포스터
          </h1>
          <p className="text-blue-200 text-sm md:text-base">
            초보자를 위한 4시간 완성 실습 교육 마스터 과정
          </p>
        </div>
      </header>

      <main className="max-w-4xl mx-auto p-4 -mt-6 relative z-20">
        
        {/* Overview */}
        <div className="bg-white rounded-xl p-6 shadow-lg mb-8 border-l-4 border-blue-500">
          <h3 className="font-bold text-lg mb-3 flex items-center gap-2 text-blue-800">
            <BookOpen size={20} /> 교육 개요
          </h3>
          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <h4 className="font-bold text-sm text-gray-500 mb-2 uppercase">교육 목표</h4>
              <p className="font-medium text-gray-800 mb-2">"디자인 경험이 없어도 4시간 후 멋진 포스터 완성"</p>
              <div className="space-y-1 text-sm text-gray-600">
                <ChecklistItem text="도서관 행사 포스터 10분 제작" />
                <ChecklistItem text="SNS용 이미지 동시 제작" />
                <ChecklistItem text="디자인 비용 절감" />
              </div>
            </div>
            <div>
              <h4 className="font-bold text-sm text-gray-500 mb-2 uppercase">준비물</h4>
              <ul className="list-disc list-inside text-sm text-gray-600 space-y-1">
                <li>노트북/PC 및 인터넷 연결</li>
                <li>구글 계정 (무료)</li>
                <li>행사 계획서나 홍보 자료 (PDF/TXT)</li>
              </ul>
            </div>
          </div>
        </div>

        {/* Part 1 */}
        <Section title="Part 1: AI 도구 준비하기" time="30분" icon={Monitor} color="blue">
          <SubPart number="1-1" title="구글 계정 만들기">
            <p className="mb-2">이미 계정이 있다면 건너뛰셔도 됩니다.</p>
            <StepList steps={[
              "google.com 접속 > 계정 만들기 클릭",
              "정보 입력 (이름, 사용자명, 비밀번호)",
              "전화번호 인증 및 완료"
            ]} />
            <p className="text-xs text-blue-600 mt-2 bg-blue-50 p-2 rounded">💡 팁: 도서관 공식 이메일로 만들면 관리가 편해요!</p>
          </SubPart>

          <SubPart number="1-2" title="NotebookLM 시작하기">
            <p className="mb-2 font-medium">"우리 도서관 자료를 읽고 이해하는 AI 비서"</p>
            <div className="bg-gray-50 p-3 rounded mb-2">
              <h5 className="font-bold text-xs text-gray-500 mb-1">실습 프로세스</h5>
              <StepList steps={[
                "notebooklm.google.com 접속",
                "새 노트북 만들기 클릭 (이름: '우리 도서관 홍보 자료')",
                "소스 추가(📎) > 파일 업로드 (PDF, TXT 등)",
                "업로드 완료 확인 (최대 20개 파일)"
              ]} />
            </div>
          </SubPart>

          <SubPart number="1-3" title="Gemini 설정하기">
            <p className="mb-2 font-medium">"AI들의 지휘자, 총괄 매니저"</p>
            <StepList steps={[
              "gemini.google.com 접속",
              "설정(⚙️) > 언어: 한국어 / 응답 길이: 상세함",
              "첫 대화 시도: '안녕하세요! 도서관 홍보 포스터를 만들고 싶어요.'"
            ]} />
          </SubPart>

          <SubPart number="1-4" title="Nano Banana (이미지 생성) 준비">
            <p className="mb-2 font-medium">"말로 설명하면 그림을 그려주는 AI 화가"</p>
            <StepList steps={[
              "Gemini 채팅창에 바로 입력",
              "예시: '수채화 스타일로 도서관에서 책 읽는 아이들 그림 그려줘'",
              "10-20초 후 4개 버전 이미지 확인"
            ]} />
          </SubPart>
        </Section>

        {/* Part 2 */}
        <Section title="Part 2: AI와 대화하는 방법 배우기" time="1시간" icon={MessageSquare} color="indigo">
          <SubPart number="2-1" title="NotebookLM으로 홍보 전략 만들기">
            <div className="mb-3">
              <span className="font-bold text-indigo-600">Q. 질문 예시</span>
              <ul className="list-disc list-inside text-sm bg-indigo-50 p-3 rounded mt-1">
                <li>"우리 도서관 인기 프로그램 3가지는?"</li>
                <li>"30-40대 학부모가 관심 가질 포인트는?"</li>
                <li>"여름방학 프로그램 홍보 문구 10개 만들어줘"</li>
              </ul>
            </div>
            <div className="text-xs text-gray-500">
              💡 꿀팁: 구체적으로 질문하기 (예: "좋은 문구" ❌ → "30대 엄마들이 좋아할 문구 5개" ⭕)
            </div>
          </SubPart>

          <SubPart number="2-2" title="Gemini로 디자인 컨셉 정하기">
            <p className="mb-2">NotebookLM의 분석 내용을 Gemini에게 전달하여 시각적 컨셉 도출</p>
            <div className="bg-gray-50 p-3 rounded text-sm border-l-4 border-indigo-400">
              <p className="font-bold mb-1">Gemini 답변 예시 (컨셉 제안)</p>
              <ul className="space-y-1">
                <li>🎨 <strong>색상:</strong> 시원한 하늘색(#87CEEB) + 노란색 포인트</li>
                <li>✨ <strong>분위기:</strong> 여름의 상쾌함 + 아이들의 밝은 웃음</li>
                <li>🖼️ <strong>요소:</strong> 책 든 아이들, 여름 나무, 도서관 실루엣</li>
              </ul>
            </div>
          </SubPart>

          <SubPart number="2-3" title="프롬프트 작성법 마스터하기">
            <p className="mb-2 font-medium">"AI에게 내리는 정확한 그림 주문서"</p>
            <PromptFormula />
            <div className="mt-4">
              <h5 className="font-bold text-sm mb-2">단계별 프롬프트 빌드업 실습</h5>
              <div className="space-y-2 text-sm">
                <div className="flex gap-2 items-center">
                  <span className="bg-gray-200 px-2 py-1 rounded text-xs">1단계</span>
                  <span>"아이들이 책 읽는 모습" (기본)</span>
                </div>
                <div className="flex gap-2 items-center">
                  <span className="bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-xs">2단계</span>
                  <span>"<strong>수채화 스타일</strong>로..." (스타일 추가)</span>
                </div>
                <div className="flex gap-2 items-center">
                  <span className="bg-indigo-200 text-indigo-800 px-2 py-1 rounded text-xs">3단계</span>
                  <span>"...<strong>7-10살 아이들 3명</strong>이..." (구체적 설명)</span>
                </div>
                <div className="flex gap-2 items-center">
                  <span className="bg-indigo-600 text-white px-2 py-1 rounded text-xs">완성</span>
                  <span>"...<strong>따뜻한 햇살, 파스텔 톤</strong>" (배경/분위기/색상)</span>
                </div>
              </div>
            </div>
          </SubPart>
        </Section>

        {/* Part 3 */}
        <Section title="Part 3: 실제 포스터 만들기" time="1시간 30분" icon={Palette} color="green">
          <SubPart number="3-1" title="첫 번째 이미지 생성하기">
            <p className="mb-2">Gemini에 프롬프트 입력 후 이미지 생성</p>
            <div className="bg-green-50 border border-green-200 p-3 rounded mb-3">
              <span className="font-bold text-green-800 text-xs block mb-1">수정 요청 팁 (마음에 안 들 때)</span>
              <ul className="list-disc list-inside text-sm">
                <li>"2번 이미지가 좋은데, 아이들 나이를 7살로 낮춰줘"</li>
                <li>"같은 구도인데 만화 스타일로 바꿔줘"</li>
              </ul>
            </div>
          </SubPart>

          <SubPart number="3-2" title="포스터 레이아웃 구성하기">
            <div className="grid grid-cols-2 gap-4 mb-3">
              <div>
                <h5 className="font-bold text-sm mb-1">필수 포함 요소</h5>
                <ul className="text-xs space-y-1 text-gray-600">
                  <li>✅ 메인 이미지</li>
                  <li>✅ 제목 & 부제목</li>
                  <li>✅ 일시 & 장소</li>
                  <li>✅ 대상 & 인원</li>
                  <li>✅ 신청 방법 & 문의처</li>
                </ul>
              </div>
              <div>
                <h5 className="font-bold text-sm mb-1">Gemini 요청 예시</h5>
                <p className="text-xs text-gray-600 bg-white p-2 rounded border">
                  "방금 만든 이미지를 포스터로 만들어줘. 제목은 상단에 크게, 텍스트 색상은 이미지와 어울리는 파란색으로 통일해줘."
                </p>
              </div>
            </div>
          </SubPart>

          <SubPart number="3-3" title="SNS용 이미지 변환하기">
            <div className="flex gap-2 mb-2">
              <div className="flex-1 bg-pink-50 p-2 rounded text-center border border-pink-100">
                <Instagram size={16} className="mx-auto mb-1 text-pink-600" />
                <span className="text-xs font-bold block">인스타 피드</span>
                <span className="text-xs text-gray-500">정사각형 (1:1)</span>
              </div>
              <div className="flex-1 bg-purple-50 p-2 rounded text-center border border-purple-100">
                <Instagram size={16} className="mx-auto mb-1 text-purple-600" />
                <span className="text-xs font-bold block">스토리</span>
                <span className="text-xs text-gray-500">세로형 (9:16)</span>
              </div>
            </div>
            <p className="text-sm">Gemini에게 "인스타 스토리용 9:16 비율로 바꿔줘, 스와이프 유도 문구 추가해줘"라고 요청하세요.</p>
          </SubPart>

          <SubPart number="3-4" title="다양한 스타일 시도하기">
            <div className="grid grid-cols-3 gap-2 text-center text-xs font-medium text-gray-600">
              <div className="p-2 bg-gray-50 rounded">수채화</div>
              <div className="p-2 bg-gray-50 rounded">일러스트</div>
              <div className="p-2 bg-gray-50 rounded">크레용</div>
              <div className="p-2 bg-gray-50 rounded">파스텔</div>
              <div className="p-2 bg-gray-50 rounded">만화(웹툰)</div>
              <div className="p-2 bg-gray-50 rounded">미니멀</div>
            </div>
            <p className="mt-2 text-sm">같은 프롬프트 뒤에 스타일 키워드만 바꿔서 다시 요청해보세요!</p>
          </SubPart>
        </Section>

        {/* Part 4 */}
        <Section title="Part 4: 심화 활용법" time="1시간" icon={Share2} color="orange">
          <SubPart number="4-1" title="시리즈 포스터 만들기">
            <p className="mb-2">4주 프로그램 등 연속성 있는 홍보물 제작</p>
            <div className="bg-orange-50 p-3 rounded text-sm">
              <p className="font-bold mb-1">전략: 템플릿 통일 + 테마 색상 변경</p>
              <ul className="grid grid-cols-2 gap-2 text-xs">
                <li>🌊 1주차: 파란색 (바다)</li>
                <li>🌲 2주차: 초록색 (숲)</li>
                <li>🌻 3주차: 노란색 (해바라기)</li>
                <li>🌌 4주차: 보라색 (우주)</li>
              </ul>
            </div>
          </SubPart>

          <SubPart number="4-2" title="NotebookLM 고급 활용 (데이터 기반)">
            <p className="mb-2">작년 후기 데이터 분석 → 포스터 문구(Copy) 도출</p>
            <div className="text-sm bg-white border p-3 rounded">
              <p className="text-gray-500 text-xs mb-1">NotebookLM 분석 결과 예시</p>
              <p className="font-bold text-gray-700">"친절한 선생님(15회), 재미있는 활동(12회)"</p>
              <div className="flex justify-center my-1 text-gray-400">⬇</div>
              <p className="font-bold text-orange-600">포스터 말풍선: "친절한 선생님과 함께해요!"</p>
            </div>
          </SubPart>

          <SubPart number="4-3" title="계절별/행사별 템플릿 라이브러리">
            <div className="space-y-3 text-sm">
              <div>
                <span className="font-bold text-gray-700 block">🌸 봄/여름/가을/겨울</span>
                <span className="text-gray-500">벚꽃(파스텔), 바다(민트), 단풍(브라운), 눈(레드&그린)</span>
              </div>
              <div>
                <span className="font-bold text-gray-700 block">🎪 행사별 특화</span>
                <span className="text-gray-500">가족 프로그램(화목함), 작가 초청(실루엣/빛), 토론회(원탁/말풍선)</span>
              </div>
            </div>
          </SubPart>

          <SubPart number="4-4" title="문제 해결 가이드 (Troubleshooting)">
            <div className="grid grid-cols-1 gap-2 text-sm">
              <div className="flex items-start gap-2 bg-red-50 p-2 rounded">
                <HelpCircle size={16} className="text-red-500 mt-0.5" />
                <div>
                  <span className="font-bold block text-red-700">이미지가 너무 복잡해요</span>
                  <span className="text-red-600 text-xs">→ "심플하게", "미니멀하게", "여백 많이" 추가</span>
                </div>
              </div>
              <div className="flex items-start gap-2 bg-red-50 p-2 rounded">
                <HelpCircle size={16} className="text-red-500 mt-0.5" />
                <div>
                  <span className="font-bold block text-red-700">색이 너무 어두워요</span>
                  <span className="text-red-600 text-xs">→ "밝은 파스텔톤", "햇살 가득한", "화사한" 추가</span>
                </div>
              </div>
              <div className="flex items-start gap-2 bg-red-50 p-2 rounded">
                <HelpCircle size={16} className="text-red-500 mt-0.5" />
                <div>
                  <span className="font-bold block text-red-700">한국적이지 않아요</span>
                  <span className="text-red-600 text-xs">→ "한국 초등학생", "한글 간판", "한국 도서관" 명시</span>
                </div>
              </div>
            </div>
          </SubPart>
        </Section>

        {/* Part 5 */}
        <Section title="Part 5: 실전 프로젝트" time="30분" icon={CheckCircle} color="purple">
          <div className="bg-white rounded-xl p-5 border-2 border-purple-100 mb-6">
            <div className="flex justify-between items-start mb-4">
              <h3 className="font-bold text-lg text-purple-800">🎯 Final Mission: 2025 여름 독서 캠프</h3>
              <span className="bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded-full font-bold">시나리오</span>
            </div>
            <div className="bg-gray-50 p-4 rounded-lg text-sm mb-4">
              <h4 className="font-bold text-gray-700 mb-2 border-b pb-1">📋 주어진 정보 (조건)</h4>
              <ul className="grid grid-cols-2 gap-2 text-gray-600">
                <li>• <strong>대상:</strong> 초등 3-6학년</li>
                <li>• <strong>일시:</strong> 8월 5-9일</li>
                <li>• <strong>특징:</strong> 1박 2일, 야외 독서</li>
                <li>• <strong>컨셉:</strong> 캠프파이어, 별, 모험</li>
              </ul>
            </div>
            <h4 className="font-bold text-gray-700 mb-2 text-sm">🚀 단계별 진행 가이드</h4>
            <div className="space-y-3 text-sm border-l-2 border-purple-200 pl-4">
              <div>
                <span className="text-purple-600 font-bold text-xs block">1. 기획 (NotebookLM)</span>
                "초등 학부모가 보낼만한 홍보 포인트 5개 알려줘"
              </div>
              <div>
                <span className="text-purple-600 font-bold text-xs block">2. 컨셉 (Gemini)</span>
                "별이 빛나는 밤하늘, 텐트, 책 읽는 아이들 그림 그려줘"
              </div>
              <div>
                <span className="text-purple-600 font-bold text-xs block">3. 완성 및 변환</span>
                텍스트 배치 후 인스타 스토리용으로 리사이즈
              </div>
            </div>
          </div>

          <div className="bg-gray-800 text-white p-5 rounded-xl">
            <h3 className="font-bold mb-3 flex items-center gap-2">
              <CheckCircle size={20} className="text-green-400" /> 최종 점검 체크리스트
            </h3>
            <div className="space-y-2 text-sm">
              <ChecklistItem text="NotebookLM에 자료 업로드 완료" checked={false} />
              <ChecklistItem text="타겟 연령층 및 홍보 포인트 도출" checked={false} />
              <ChecklistItem text="Gemini로 디자인 컨셉 및 색상 결정" checked={false} />
              <ChecklistItem text="메인 이미지 생성 (3-4개 버전)" checked={false} />
              <ChecklistItem text="텍스트 정보(일시, 장소 등) 확인" checked={false} />
              <ChecklistItem text="SNS용/인쇄용 파일 저장" checked={false} />
            </div>
            <button className="w-full mt-4 bg-purple-600 hover:bg-purple-500 py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2">
              <Download size={18} /> 체크리스트 다운로드
            </button>
          </div>
        </Section>

        {/* Footer */}
        <div className="mt-12 text-center pb-10 text-gray-500">
          <div className="inline-block p-4 bg-yellow-50 rounded-full mb-4 border border-yellow-200 shadow-sm">
            <p className="font-bold text-yellow-800 text-sm">🌟 "완벽한 첫 작품을 만들려 하지 마세요! 처음엔 60점도 성공입니다."</p>
          </div>
          <p className="text-xs">© AI Library Poster Master Class</p>
        </div>
      </main>
    </div>
  );
}
